grammar: rule(s) eofile
       | <error>

eofile: /^\Z/

rule: rulename ':' <commit> production(s /\|/)
    | <error?> <reject>

rulename: /[A-Za-z]\w*/

production: item(s)
          | nil

item: repetition
    | subrule
    | terminal
    | directive

subrule: /[A-Za-z]\w*\b(?!\s*:)/

terminal: string
        | regex

string: /"(\\.|[^"])*"/
      | /'(\\.|[^'])*'/

regex: /\/(\\\/|[^\/])*\//

directive: '<error?>'
         | '<error>'
         | '<reject>'
         | '<commit>'
         | '<uncommit>'
         | '<leftop' subrule regex subrule '>'

repetition: subrule howoften

howoften: '(?)'
        | '(s' regex(?) ')'
        | '(s?' regex(?) ')'

nil: ''
